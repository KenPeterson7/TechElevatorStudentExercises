Begin;

drop table if exists customers, artists, art, customer_purchases cascade;

CREATE TABLE customers(
 customer_id serial,
 name varchar(64) not null,
 address varchar(100) not null,
 phone_number varchar(11) null,
	
 constraint pk_customers primary key (customer_id)
);


create table artists(
	artist_id serial,
	first_name varchar(15) not null,
	last_name varchar(15) not null,
	constraint pk_artists primary key (artist_id)
);

create table art(
	art_code_id serial,
	art_code varchar(5) not null,
	title varchar(64) not null,
	artist_id int not null,
	constraint pk_art primary key (art_code_id),
	constraint fk_art_artists foreign key (artist_id) references artists(artist_id)
);

create table customers_purchases(
	customer_id int not null,
	art_code_id int not null,
	purchase_date timestamp not null,
	price money not null,
	constraint pk_customer_purchases primary key (customer_id, art_code_id, purchase_date),
	constraint fk_customer_purchases_art foreign key(art_code_id) references art(art_code_id),
	constraint fk_customer_purchases_customers foreign key (customer_id) references customers(customer_id)
);

-- add insert statements if time permits

commit;